<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GG Point ‚Äî –ö–µ–π–∫–∞–ø—ã (–ö–ª–∞–≤–∏—à–∏ –¥–ª—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä)</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary-blue: #2563eb;
            --primary-dark: #1e40af;
            --accent-teal: #0d9488;
            --accent-purple: #7c3aed;
            --sale-red: #ef4444;
            --sale-orange: #f97316;
            --discount-pink: #db2777;
            --hot-gradient: linear-gradient(135deg, #ff6b00 0%, #ff0000 100%);
            --dark-bg: #0f172a;
            --card-bg: #1e293b;
            --text-light: #f8fafc;
            --text-gray: #cbd5e1;
            --gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --sale-gradient: linear-gradient(135deg, #f97316 0%, #ef4444 100%);
            --discount-gradient: linear-gradient(135deg, #db2777 0%, #7c3aed 100%);
        }

        body {
            background-color: var(--dark-bg);
            color: var(--text-light);
            overflow-x: hidden;
        }

        /* üî• –£–ª—É—á—à–µ–Ω–Ω—ã–π —Ö–µ–¥–µ—Ä */
        header {
            background: rgba(30, 41, 59, 0.95);
            backdrop-filter: blur(10px);
            padding: 1rem 2rem;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            border-bottom: 2px solid var(--primary-blue);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
        }

        .logo {
            font-size: 2.2rem;
            font-weight: bold;
            background: var(--gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .logo a {
            text-decoration: none;
            background: var(--gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 2.5rem;
        }

        nav a {
            color: var(--text-light);
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            position: relative;
            font-size: 1.1rem;
        }

        nav a:hover {
            color: var(--primary-blue);
        }

        nav a::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 3px;
            background: var(--gradient);
            transition: width 0.3s ease;
            border-radius: 2px;
        }

        nav a:hover::after {
            width: 100%;
        }

        .admin-btn {
            background: transparent;
            border: 2px solid var(--primary-blue);
            color: var(--primary-blue);
            padding: 0.7rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 1rem;
        }

        .admin-btn:hover {
            background: var(--primary-blue);
            color: var(--text-light);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(37, 99, 235, 0.3);
        }

        /* üéÆ –ì–µ—Ä–æ–π-—Å–µ–∫—Ü–∏—è –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ */
        .category-hero {
            height: 60vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            background: linear-gradient(135deg, var(--dark-bg) 0%, #1e293b 100%);
            padding: 0 2rem;
            margin-top: 80px;
            position: relative;
            overflow: hidden;
        }

        .category-hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.gstatic.com/2000/svg" viewBox="0 0 1000 1000"><polygon fill="%232563eb" fill-opacity="0.05" points="0,1000 1000,0 1000,1000"/></svg>');
            background-size: cover;
        }

        .hero-content h1 {
            font-size: 3.5rem;
            margin-bottom: 1.5rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1.2;
        }

        .hero-content p {
            font-size: 1.3rem;
            margin-bottom: 2.5rem;
            color: var(--text-gray);
            max-width: 700px;
            line-height: 1.6;
        }

        /* üéØ –°–µ–∫—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤ */
        .products {
            padding: 5rem 2rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .section-title {
            text-align: center;
            font-size: 3rem;
            margin-bottom: 3rem;
            position: relative;
            color: var(--text-light);
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 150px;
            height: 4px;
            background: var(--gradient);
            border-radius: 2px;
        }

        /* üéØ –£–ª—É—á—à–µ–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã */
        .filters-section {
            display: flex;
            gap: 2rem;
            margin-bottom: 3rem;
            flex-wrap: wrap;
            align-items: center;
            justify-content: center;
            background: var(--card-bg);
            padding: 2rem;
            border-radius: 15px;
            border: 1px solid #334155;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            flex: 1;
            min-width: 200px;
        }

        .filter-group label {
            color: var(--text-light);
            font-size: 1rem;
            font-weight: 600;
        }

        .filter-select {
            background: var(--dark-bg);
            border: 2px solid #334155;
            border-radius: 10px;
            padding: 0.8rem 1rem;
            color: var(--text-light);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .filter-select:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .products-count {
            color: var(--text-light);
            margin-bottom: 2rem;
            text-align: center;
            font-size: 1.2rem;
            font-weight: 600;
        }

        /* üé® –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ï –∫–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ */
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 2rem;
        }

        .product-card {
            background: var(--card-bg);
            border-radius: 20px;
            overflow: hidden;
            transition: all 0.4s ease;
            border: 2px solid #334155;
            cursor: pointer;
            position: relative;
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .product-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
            border-color: var(--primary-blue);
        }

        .product-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--gradient);
            color: white;
            padding: 0.3rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            z-index: 2;
        }

        .product-image-container {
            width: 100%;
            height: 280px;
            overflow: hidden;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.2);
            cursor: zoom-in;
        }

        .product-image {
            width: 100%;
            height: 100%;
            object-fit: contain;
            transition: transform 0.5s ease;
        }

        .product-card:hover .product-image {
            transform: scale(1.05);
        }

        /* üîç –ó–Ω–∞—á–æ–∫ –ª—É–ø—ã –Ω–∞ —Ñ–æ—Ç–æ */
        .zoom-indicator {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 2;
        }

        .product-image-container:hover .zoom-indicator {
            opacity: 1;
        }

        .product-info {
            padding: 1.5rem;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .product-name {
            font-size: 1.3rem;
            margin-bottom: 0.8rem;
            color: var(--text-light);
            line-height: 1.4;
            font-weight: 600;
        }

        .product-category {
            font-size: 0.9rem;
            color: var(--primary-blue);
            background: rgba(37, 99, 235, 0.1);
            padding: 0.3rem 1rem;
            border-radius: 15px;
            display: inline-block;
            margin-bottom: 1rem;
            font-weight: 600;
        }

        .product-description-short {
            color: var(--text-gray);
            margin-bottom: 1rem;
            line-height: 1.5;
            font-size: 0.95rem;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            flex: 1;
        }

        .product-price {
            font-size: 1.5rem;
            color: var(--accent-teal);
            font-weight: bold;
            margin-bottom: 1rem;
        }

        /* üé™ –£–ª—É—á—à–µ–Ω–Ω—ã–µ –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(5px);
            z-index: 2000;
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--card-bg);
            border-radius: 20px;
            padding: 2.5rem;
            max-width: 500px;
            width: 90%;
            border: 2px solid var(--primary-blue);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
            max-height: 90vh;
            overflow-y: auto;
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 2rem;
            cursor: pointer;
            color: var(--text-gray);
            transition: color 0.3s ease;
            background: none;
            border: none;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            z-index: 2001;
        }

        .close-modal:hover {
            color: var(--primary-blue);
            background: rgba(37, 99, 235, 0.1);
        }

        .modal h2 {
            margin-bottom: 2rem;
            color: var(--primary-blue);
            text-align: center;
            font-size: 2.2rem;
        }

        .product-detail-modal .modal-content {
            max-width: 1000px;
            width: 95%;
            max-height: 90vh;
            padding: 0;
        }

        .product-detail-content {
            padding: 2.5rem;
        }

        .product-detail-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
        }

        /* üñºÔ∏è –°—Ç–∏–ª–∏ –¥–ª—è –≥–∞–ª–µ—Ä–µ–∏ —Ñ–æ—Ç–æ */
        .product-gallery {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .main-image {
            position: relative;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 400px;
            max-height: 500px;
            padding: 0;
            cursor: pointer;
        }

        .main-image img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            transition: transform 0.3s ease;
        }

        .main-image img:hover {
            transform: scale(1.02);
        }

        .gallery-nav {
            position: absolute;
            top: 50%;
            width: 100%;
            display: flex;
            justify-content: space-between;
            padding: 0 1rem;
            transform: translateY(-50%);
            z-index: 2;
        }

        .nav-btn {
            background: rgba(0, 0, 0, 0.7);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.2rem;
        }

        .nav-btn:hover {
            background: var(--primary-blue);
            transform: scale(1.1);
        }

        .image-thumbnails {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            justify-content: center;
            padding: 10px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
        }

        .thumbnail {
            width: 80px;
            height: 80px;
            object-fit: contain;
            border-radius: 8px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            padding: 0;
        }

        .thumbnail:hover {
            border-color: var(--primary-blue);
            transform: scale(1.1);
        }

        .thumbnail.active {
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 2px var(--primary-blue);
        }

        .photo-count {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem;
            background: rgba(59, 130, 246, 0.1);
            border-radius: 8px;
            color: var(--text-light);
            margin-top: 1rem;
            justify-content: center;
        }

        .product-description-full {
            margin: 1.5rem 0;
            color: var(--text-gray);
            line-height: 1.7;
            font-size: 1.1rem;
        }

        .product-features {
            margin: 2rem 0;
        }

        .feature-list {
            list-style: none;
            margin-top: 1rem;
        }

        .feature-list li {
            padding: 0.5rem 0;
            color: var(--text-gray);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .feature-list li::before {
            content: '‚úì';
            color: var(--accent-teal);
            font-weight: bold;
        }

        .video-container {
            margin-top: 3rem;
        }

        .video-container h3 {
            margin-bottom: 1rem;
            color: var(--text-light);
        }

        .video-container iframe {
            width: 100%;
            height: 400px;
            border-radius: 15px;
            border: none;
        }

        /* üí¨ –°—Ç–∏–ª–∏ –¥–ª—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ */
        .comments-section {
            margin-top: 3rem;
            padding: 2rem;
            background: rgba(30, 41, 59, 0.5);
            border-radius: 15px;
            border: 1px solid #334155;
        }

        .comments-title {
            font-size: 1.8rem;
            color: var(--text-light);
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }

        .comment-form {
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
        }

        .comment-form h4 {
            color: var(--text-light);
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }

        .comment-input-group {
            margin-bottom: 1rem;
        }

        .comment-input-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-light);
            font-weight: 600;
        }

        .comment-input {
            width: 100%;
            padding: 0.8rem;
            background: var(--dark-bg);
            border: 1px solid #334155;
            border-radius: 8px;
            color: var(--text-light);
            font-size: 0.95rem;
        }

        .comment-textarea {
            width: 100%;
            min-height: 100px;
            padding: 0.8rem;
            background: var(--dark-bg);
            border: 1px solid #334155;
            border-radius: 8px;
            color: var(--text-light);
            font-size: 0.95rem;
            resize: vertical;
        }

        .comment-submit-btn {
            background: var(--primary-blue);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .comment-submit-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .comments-list {
            margin-top: 2rem;
        }

        .comment-item {
            background: rgba(30, 41, 59, 0.7);
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border-left: 4px solid var(--primary-blue);
        }

        .comment-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.8rem;
        }

        .comment-author {
            font-weight: 600;
            color: var(--text-light);
            font-size: 1.1rem;
        }

        .comment-date {
            color: var(--text-gray);
            font-size: 0.85rem;
        }

        .comment-text {
            color: var(--text-gray);
            line-height: 1.6;
            margin-bottom: 0.5rem;
        }

        .no-comments {
            text-align: center;
            padding: 2rem;
            color: var(--text-gray);
            font-style: italic;
        }

        /* üìû –§—É—Ç–µ—Ä */
        footer {
            background: var(--card-bg);
            padding: 4rem 2rem;
            border-top: 2px solid var(--primary-blue);
            margin-top: 4rem;
        }

        .footer-content {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 3rem;
        }

        .footer-section h3 {
            color: var(--primary-blue);
            margin-bottom: 1.5rem;
            font-size: 1.5rem;
        }

        .contact-info {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .contact-item {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            color: var(--text-gray);
            font-size: 1.1rem;
        }

        .contact-item a {
            color: var(--text-gray);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .contact-item a:hover {
            color: var(--primary-blue);
        }

        /* ‚úèÔ∏è –°—Ç–∏–ª–∏ –¥–ª—è —Ñ–æ—Ä–º—ã */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-light);
            font-weight: 600;
            font-size: 1rem;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 0.8rem;
            background: var(--dark-bg);
            border: 2px solid #334155;
            border-radius: 10px;
            color: var(--text-light);
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .submit-btn {
            width: 100%;
            padding: 1rem;
            background: var(--gradient);
            border: none;
            border-radius: 10px;
            color: var(--text-light);
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1rem;
            margin-top: 1rem;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        /* üñºÔ∏è –°—Ç–∏–ª–∏ –¥–ª—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ñ–æ—Ç–æ */
        .photo-viewer-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 3000;
            backdrop-filter: blur(10px);
        }

        .photo-viewer-content {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .viewer-main-image {
            max-width: 90%;
            max-height: 80vh;
            object-fit: contain;
            border-radius: 10px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            cursor: zoom-in;
            transition: transform 0.3s ease;
        }

        .viewer-nav {
            position: absolute;
            top: 50%;
            width: 100%;
            display: flex;
            justify-content: space-between;
            padding: 0 2rem;
            transform: translateY(-50%);
            z-index: 3001;
        }

        .viewer-nav-btn {
            background: rgba(37, 99, 235, 0.7);
            color: white;
            border: none;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.5rem;
            backdrop-filter: blur(5px);
        }

        .viewer-nav-btn:hover {
            background: var(--primary-blue);
            transform: scale(1.1);
        }

        .viewer-thumbnails {
            position: absolute;
            bottom: 20px;
            display: flex;
            gap: 0.5rem;
            padding: 1rem;
            background: rgba(30, 41, 59, 0.7);
            border-radius: 15px;
            backdrop-filter: blur(10px);
            max-width: 90%;
            overflow-x: auto;
            scrollbar-width: thin;
        }

        .viewer-thumbnails::-webkit-scrollbar {
            height: 6px;
        }

        .viewer-thumbnails::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 3px;
        }

        .viewer-thumbnails::-webkit-scrollbar-thumb {
            background: var(--primary-blue);
            border-radius: 3px;
        }

        .viewer-thumbnail {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 8px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .viewer-thumbnail:hover {
            border-color: var(--primary-blue);
            transform: scale(1.1);
        }

        .viewer-thumbnail.active {
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 2px var(--primary-blue);
        }

        .close-viewer {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 2.5rem;
            color: white;
            cursor: pointer;
            background: rgba(0, 0, 0, 0.5);
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            z-index: 3001;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .close-viewer:hover {
            background: var(--primary-blue);
            transform: rotate(90deg);
        }

        .viewer-counter {
            position: absolute;
            top: 30px;
            left: 30px;
            color: white;
            font-size: 1.2rem;
            background: rgba(0, 0, 0, 0.5);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            backdrop-filter: blur(5px);
            font-weight: 600;
        }

        .viewer-actions {
            position: absolute;
            top: 30px;
            right: 100px;
            display: flex;
            gap: 1rem;
            z-index: 3001;
        }

        .viewer-action-btn {
            background: rgba(37, 99, 235, 0.7);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.2rem;
            backdrop-filter: blur(5px);
        }

        .viewer-action-btn:hover {
            background: var(--primary-blue);
            transform: scale(1.1);
        }

        /* üì± –ê–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
        @media (max-width: 768px) {
            .header-container {
                flex-direction: row;
                flex-wrap: wrap;
            }
            
            .logo {
                font-size: 1.8rem;
            }
            
            nav ul {
                gap: 1rem;
            }
            
            nav a {
                font-size: 1rem;
            }
            
            .admin-btn {
                padding: 0.5rem 1rem;
                font-size: 0.9rem;
            }
            
            .add-category-btn {
                padding: 0.5rem 1rem;
                font-size: 0.9rem;
                margin-right: 0.5rem;
            }
            
            .category-hero {
                height: 50vh;
                margin-top: 60px;
                padding: 0 1rem;
            }
            
            .hero-content h1 {
                font-size: 2.5rem;
            }
            
            .hero-content p {
                font-size: 1.1rem;
            }
            
            .products {
                padding: 3rem 1rem;
            }
            
            .section-title {
                font-size: 2rem;
            }
            
            .filters-section {
                padding: 1.5rem;
                gap: 1rem;
            }
            
            .filter-group {
                min-width: 100%;
            }
            
            .products-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            
            .product-image-container {
                height: 200px;
            }
            
            .product-detail-grid {
                grid-template-columns: 1fr;
                gap: 2rem;
            }
            
            .main-image {
                min-height: 250px;
                max-height: 300px;
            }
            
            .thumbnail {
                width: 60px;
                height: 60px;
            }
            
            .video-container iframe {
                height: 200px;
            }
            
            footer {
                padding: 3rem 1rem;
            }
            
            .comments-section {
                padding: 1.5rem;
            }
            
            .comment-item {
                padding: 1rem;
            }
            
            .comment-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }
            
            /* –ê–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫–∞ —Ñ–æ—Ç–æ */
            .viewer-main-image {
                max-width: 95%;
                max-height: 60vh;
            }
            
            .viewer-nav {
                padding: 0 1rem;
            }
            
            .viewer-nav-btn {
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
            }
            
            .viewer-thumbnails {
                bottom: 10px;
                padding: 0.5rem;
            }
            
            .viewer-thumbnail {
                width: 60px;
                height: 60px;
            }
            
            .close-viewer {
                top: 10px;
                right: 10px;
                width: 50px;
                height: 50px;
                font-size: 2rem;
            }
            
            .viewer-counter {
                top: 20px;
                left: 20px;
                font-size: 1rem;
            }
            
            .viewer-actions {
                top: 20px;
                right: 70px;
            }
            
            .viewer-action-btn {
                width: 40px;
                height: 40px;
                font-size: 1rem;
            }
        }

        /* ‚ú® –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in-up {
            animation: fadeInUp 0.6s ease-out;
        }
        
        /* –ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ */
        .add-category-btn {
            background: transparent;
            border: 2px solid var(--accent-purple);
            color: var(--accent-purple);
            padding: 0.7rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 1rem;
            margin-right: 10px;
        }

        .add-category-btn:hover {
            background: var(--accent-purple);
            color: var(--text-light);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(124, 58, 237, 0.3);
        }
        
        .add-category-btn i {
            margin-right: 5px;
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π */
        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOutRight {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <!-- üéØ –®–∞–ø–∫–∞ —Å–∞–π—Ç–∞ -->
    <header>
        <div class="header-container">
            <div class="logo">
                <a href="index.html">GGPOINT</a>
            </div>
            <nav>
                <ul>
                    <li><a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a></li>
                    <li><a href="index.html#hot-prices">–°–∫–∏–¥–∫–∏</a></li>
                    <li><a href="keycaps.html" style="color: var(--primary-blue);">–ö–µ–π–∫–∞–ø—ã</a></li>
                    <li><a href="mats.html">–ö–æ–≤—Ä–∏–∫–∏</a></li>
                    <li><a href="index.html#contacts">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
                </ul>
            </nav>
            <div class="admin-controls" style="display: none;" id="adminControls">
                <button class="add-category-btn" id="addCategoryProductBtn">
                    <i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä
                </button>
                <button class="admin-btn" id="adminLogoutBtn">
                    <i class="fas fa-sign-out-alt"></i> –í—ã–π—Ç–∏
                </button>
            </div>
            <button class="admin-btn" id="adminBtn">
                <i class="fas fa-cog"></i> Admin
            </button>
        </div>
    </header>

    <!-- üéÆ –ì–µ—Ä–æ–π-—Å–µ–∫—Ü–∏—è –¥–ª—è –∫–µ–π–∫–∞–ø–æ–≤ -->
    <section class="category-hero" id="home">
        <div class="hero-content fade-in-up">
            <h1>–ö–µ–π–∫–∞–ø—ã –¥–ª—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä</h1>
            <p>–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∫–ª–∞–≤–∏—à–∏ –¥–ª—è –º–µ—Ö–∞–Ω–∏—á–µ—Å–∫–∏—Ö –∫–ª–∞–≤–∏–∞—Ç—É—Ä. –†–∞–∑–ª–∏—á–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏, –º–∞—Ç–µ—Ä–∏–∞–ª—ã –∏ –¥–∏–∑–∞–π–Ω—ã –¥–ª—è –∏—Å—Ç–∏–Ω–Ω—ã—Ö —Ü–µ–Ω–∏—Ç–µ–ª–µ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä.</p>
        </div>
    </section>

    <!-- üé™ –°–µ–∫—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤ -->
    <section class="products" id="products">
        <h2 class="section-title">–ö–∞—Ç–∞–ª–æ–≥ –∫–µ–π–∫–∞–ø–æ–≤</h2>
        
        <!-- üéØ –§–∏–ª—å—Ç—Ä—ã –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ -->
        <div class="filters-section">
            <div class="filter-group">
                <label><i class="fas fa-filter"></i> –ú–∞—Ç–µ—Ä–∏–∞–ª</label>
                <select class="filter-select" id="materialFilter">
                    <option value="all">–í—Å–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã</option>
                    <option value="abs">ABS –ø–ª–∞—Å—Ç–∏–∫</option>
                    <option value="pbt">PBT –ø–ª–∞—Å—Ç–∏–∫</option>
                    <option value="double-shot">Double-shot</option>
                    <option value="diy">DIY –Ω–∞–±–æ—Ä—ã</option>
                </select>
            </div>
            
            <div class="filter-group">
                <label><i class="fas fa-palette"></i> –ü—Ä–æ—Ñ–∏–ª—å</label>
                <select class="filter-select" id="profileFilter">
                    <option value="all">–í—Å–µ –ø—Ä–æ—Ñ–∏–ª–∏</option>
                    <option value="cherry">Cherry</option>
                    <option value="oem">OEM</option>
                    <option value="sa">SA</option>
                    <option value="dsa">DSA</option>
                    <option value="xda">XDA</option>
                </select>
            </div>

            <div class="filter-group">
                <label><i class="fas fa-sort"></i> –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞</label>
                <select class="filter-select" id="priceSort">
                    <option value="default">–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é</option>
                    <option value="price_asc">–°–Ω–∞—á–∞–ª–∞ –¥–µ—à–µ–≤—ã–µ</option>
                    <option value="price_desc">–°–Ω–∞—á–∞–ª–∞ –¥–æ—Ä–æ–≥–∏–µ</option>
                </select>
            </div>

            <div class="filter-group">
                <label><i class="fas fa-search"></i> –ü–æ–∏—Å–∫</label>
                <input type="text" class="filter-select" id="searchInput" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫–µ–π–∫–∞–ø–æ–≤...">
            </div>
        </div>

        <div class="products-count" id="productsCount">–ù–∞–π–¥–µ–Ω–æ —Ç–æ–≤–∞—Ä–æ–≤: 0</div>
        
        <div class="products-grid" id="productsGrid">
            <!-- üé® –¢–æ–≤–∞—Ä—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –∑–¥–µ—Å—å -->
        </div>
    </section>

    <!-- üìû –§—É—Ç–µ—Ä -->
    <footer id="contacts">
        <div class="footer-content">
            <div class="footer-section">
                <h3>GGPoint</h3>
                <p>–ö–∞—Ç–∞–ª–æ–≥ –∏–≥—Ä–æ–≤–æ–π –ø–µ—Ä–∏—Ñ–µ—Ä–∏–∏ –∏ –∞–∫—Å–µ—Å—Å—É–∞—Ä–æ–≤.</p>
            </div>
            <div class="footer-section">
                <h3>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h3>
                <div class="contact-info">
                    <div class="contact-item">
                        <i class="fas fa-phone"></i>
                        <span>+998 97 747 0157</span>
                    </div>
                    <div class="contact-item">
                        <i class="fab fa-telegram"></i>
                        <span><a href="https://t.me/GGPointUz">@GGPointUz</a></span>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- üîê –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—Ö–æ–¥–∞ –≤ –∞–¥–º–∏–Ω–∫—É -->
    <div class="modal" id="adminLoginModal">
        <div class="modal-content">
            <button class="close-modal" id="closeAdminModal">&times;</button>
            <h2>–í—Ö–æ–¥ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h2>
            <form id="adminLoginForm">
                <div class="form-group">
                    <label for="adminLogin"><i class="fas fa-user"></i> –õ–æ–≥–∏–Ω</label>
                    <input type="text" id="adminLogin" required placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –ª–æ–≥–∏–Ω">
                </div>
                <div class="form-group">
                    <label for="adminPassword"><i class="fas fa-lock"></i> –ü–∞—Ä–æ–ª—å</label>
                    <input type="password" id="adminPassword" required placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –ø–∞—Ä–æ–ª—å">
                </div>
                <button type="submit" class="submit-btn">
                    <i class="fas fa-sign-in-alt"></i> –í–æ–π—Ç–∏
                </button>
            </form>
        </div>
    </div>

    <!-- ‚ûï –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ -->
    <div class="modal" id="addProductModal">
        <div class="modal-content">
            <button class="close-modal" id="closeAddModal">&times;</button>
            <h2>–î–æ–±–∞–≤–∏—Ç—å –∫–µ–π–∫–∞–ø—ã</h2>
            <form id="addCategoryProductForm">
                <div class="form-group">
                    <label for="catProductName">–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ *</label>
                    <input type="text" id="catProductName" required placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ù–∞–±–æ—Ä –∫–µ–π–∫–∞–ø–æ–≤ Cherry –ø—Ä–æ—Ñ–∏–ª—å">
                </div>
                <div class="form-group">
                    <label for="catProductBrand">–ë—Ä–µ–Ω–¥</label>
                    <select id="catProductBrand">
                        <option value="">–ë–µ–∑ –±—Ä–µ–Ω–¥–∞</option>
                        <option value="YMDK">YMDK</option>
                        <option value="Akko">Akko</option>
                        <option value="HyperX">HyperX</option>
                        <option value="Drop">Drop</option>
                        <option value="Razer">Razer</option>
                        <option value="SteelSeries">SteelSeries</option>
                        <option value="GMK">GMK</option>
                        <option value="EnjoyPBT">EnjoyPBT</option>
                        <option value="Keychron">Keychron</option>
                        <option value="Ducky">Ducky</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="catProductPrice">–¶–µ–Ω–∞ *</label>
                    <input type="text" id="catProductPrice" required placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 299,000 UZS">
                </div>
                <div class="form-group">
                    <label for="catProductMaterial">–ú–∞—Ç–µ—Ä–∏–∞–ª</label>
                    <select id="catProductMaterial">
                        <option value="abs">ABS –ø–ª–∞—Å—Ç–∏–∫</option>
                        <option value="pbt">PBT –ø–ª–∞—Å—Ç–∏–∫</option>
                        <option value="double-shot">Double-shot</option>
                        <option value="diy">DIY –Ω–∞–±–æ—Ä</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="catProductProfile">–ü—Ä–æ—Ñ–∏–ª—å</label>
                    <select id="catProductProfile">
                        <option value="cherry">Cherry</option>
                        <option value="oem">OEM</option>
                        <option value="sa">SA</option>
                        <option value="dsa">DSA</option>
                        <option value="xda">XDA</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="catProductDescription">–û–ø–∏—Å–∞–Ω–∏–µ *</label>
                    <textarea id="catProductDescription" required placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∫–µ–π–∫–∞–ø–æ–≤..."></textarea>
                </div>
                <div class="form-group">
                    <label for="catProductImages">–§–æ—Ç–æ (URL, –∫–∞–∂–¥–æ–µ —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏) *</label>
                    <textarea id="catProductImages" required placeholder="https://example.com/photo1.jpg
https://example.com/photo2.jpg
https://example.com/photo3.jpg" rows="4"></textarea>
                </div>
                <div class="form-group">
                    <label for="catProductFeatures">–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)</label>
                    <textarea id="catProductFeatures" placeholder="PBT –ø–ª–∞—Å—Ç–∏–∫, Cherry –ø—Ä–æ—Ñ–∏–ª—å, 140 –∫–ª–∞–≤–∏—à, –†—É—Å—Å–∫–∞—è+–∞–Ω–≥–ª–∏–π—Å–∫–∞—è —Ä–∞—Å–∫–ª–∞–¥–∫–∞" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="catProductVideo">YouTube –≤–∏–¥–µ–æ (ID –∏–ª–∏ —Å—Å—ã–ª–∫–∞)</label>
                    <input type="text" id="catProductVideo" placeholder="dQw4w9WgXcQ –∏–ª–∏ https://youtu.be/dQw4w9WgXcQ">
                </div>
                <button type="submit" class="submit-btn">
                    <i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å –∫–µ–π–∫–∞–ø—ã
                </button>
            </form>
        </div>
    </div>

    <!-- üîç –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–µ—Ç–∞–ª–µ–π —Ç–æ–≤–∞—Ä–∞ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ -->
    <div class="modal product-detail-modal" id="productDetailModal">
        <div class="modal-content product-detail-content">
            <button class="close-modal" id="closeProductModal">&times;</button>
            <div id="productDetailContent">
                <!-- üéØ –ö–æ–Ω—Ç–µ–Ω—Ç —Ç–æ–≤–∞—Ä–∞ –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
            </div>
        </div>
    </div>

    <!-- üñºÔ∏è –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ñ–æ—Ç–æ -->
    <div class="modal photo-viewer-modal" id="photoViewerModal">
        <div class="photo-viewer-content">
            <div class="viewer-counter" id="photoCounter">1 / 5</div>
            
            <div class="viewer-actions">
                <button class="viewer-action-btn" id="zoomInBtn">
                    <i class="fas fa-search-plus"></i>
                </button>
                <button class="viewer-action-btn" id="zoomOutBtn">
                    <i class="fas fa-search-minus"></i>
                </button>
                <button class="viewer-action-btn" id="downloadBtn">
                    <i class="fas fa-download"></i>
                </button>
            </div>
            
            <button class="close-viewer" id="closeViewer">&times;</button>
            
            <div class="viewer-nav">
                <button class="viewer-nav-btn" id="prevPhotoBtn">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <button class="viewer-nav-btn" id="nextPhotoBtn">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
            
            <img src="" alt="" class="viewer-main-image" id="viewerMainImage">
            
            <div class="viewer-thumbnails" id="viewerThumbnails">
                <!-- –ú–∏–Ω–∏–∞—Ç—é—Ä—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
            </div>
        </div>
    </div>

    <script type="module">
        // üî• –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º Firebase
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js';
        import { getDatabase, ref, onValue, set, get } from 'https://www.gstatic.com/firebasejs/9.6.10/firebase-database.js';

        // üéØ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyDcyOWAF7TA8h8P36Sk5EbDPzA9sEFuTXo",
            authDomain: "ggpoint-shop.firebaseapp.com",
            databaseURL: "https://ggpoint-shop-default-rtdb.firebaseio.com",
            projectId: "ggpoint-shop",
            storageBucket: "ggpoint-shop.firebasestorage.app",
            messagingSenderId: "182227173652",
            appId: "1:182227173652:web:0949e2edae9900afd98201",
            measurementId: "G-V76H7K3VR4"
        };

        // üöÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Firebase
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);

        let products = [];
        let filteredProducts = [];
        let currentImageIndex = 0;
        let currentProductIdForComments = null;
        let comments = {};
        let isAdminLoggedIn = false;
        let currentViewerProduct = null;
        let currentViewerIndex = 0;

        // üì• –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ Firebase
        function loadKeycaps() {
            console.log('üîÑ –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–µ–π–∫–∞–ø—ã –∏–∑ Firebase...');
            
            const productsRef = ref(database, 'products');
            onValue(productsRef, (snapshot) => {
                const data = snapshot.val();
                if (data) {
                    // –§–∏–ª—å—Ç—Ä—É–µ–º —Ç–æ–ª—å–∫–æ –∫–µ–π–∫–∞–ø—ã
                    products = Object.values(data).filter(product => 
                        product.category === 'keycaps' || 
                        product.category === '–∫–µ–π–∫–∞–ø—ã' ||
                        product.name.toLowerCase().includes('keycap') ||
                        product.name.toLowerCase().includes('–∫–µ–π–∫–∞–ø') ||
                        (product.category === '–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞' && 
                         (product.name.toLowerCase().includes('keycap') || 
                          product.name.toLowerCase().includes('caps')))
                    );
                    console.log('‚úÖ –ö–µ–π–∫–∞–ø—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã:', products.length);
                    
                    filteredProducts = [...products];
                    renderProducts();
                    updateProductsCount();
                } else {
                    products = getDefaultKeycaps();
                    console.log('üìù –ë–∞–∑–∞ –∫–µ–π–∫–∞–ø–æ–≤ –ø—É—Å—Ç–∞—è, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ');
                    
                    filteredProducts = [...products];
                    renderProducts();
                    updateProductsCount();
                }
            });

            // –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
            const commentsRef = ref(database, 'comments');
            onValue(commentsRef, (snapshot) => {
                const data = snapshot.val();
                if (data) {
                    comments = data;
                    console.log('‚úÖ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã:', Object.keys(comments).length);
                } else {
                    comments = {};
                }
            });
        }

        // üì¶ –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∫–µ–π–∫–∞–ø–æ–≤
        function getDefaultKeycaps() {
            return [
                {
                    id: 101,
                    name: "–ù–∞–±–æ—Ä –∫–µ–π–∫–∞–ø–æ–≤ PBT Double-shot Cherry –ø—Ä–æ—Ñ–∏–ª—å",
                    category: "keycaps",
                    brand: "YMDK",
                    price: "299,000 UZS",
                    images: [
                        "https://images.unsplash.com/photo-1541140532154-b024d705b90a?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                        "https://images.unsplash.com/photo-1587829741301-dc798b83add3?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                        "https://images.unsplash.com/photo-1591799264318-7e6ef8ddb7ea?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
                    ],
                    description: "–í—ã—Å–æ–∫–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ PBT –∫–µ–π–∫–∞–ø—ã —Å –¥–≤–æ–π–Ω—ã–º –ª–∏—Ç—å–µ–º. Cherry –ø—Ä–æ—Ñ–∏–ª—å, —Ä—É—Å—Å–∫–∞—è –∏ –∞–Ω–≥–ª–∏–π—Å–∫–∞—è —Ä–∞—Å–∫–ª–∞–¥–∫–∞. –°–æ–≤–º–µ—Å—Ç–∏–º—ã —Å–æ –≤—Å–µ–º–∏ –º–µ—Ö–∞–Ω–∏—á–µ—Å–∫–∏–º–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞–º–∏ —Å –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è–º–∏ MX. –õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –ø–µ—á–∞—Ç–∏, —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ –∏—Å—Ç–∏—Ä–∞–Ω–∏—é –∏ –≤—ã—Ü–≤–µ—Ç–∞–Ω–∏—é.",
                    material: "pbt",
                    profile: "cherry",
                    video: "dQw4w9WgXcQ",
                    features: ["PBT –ø–ª–∞—Å—Ç–∏–∫ –≤—ã—Å—à–µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞", "Double-shot —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è", "Cherry –ø—Ä–æ—Ñ–∏–ª—å", "–ê–Ω–≥–ª–∏–π—Å–∫–∞—è+—Ä—É—Å—Å–∫–∞—è —Ä–∞—Å–∫–ª–∞–¥–∫–∞", "140 –∫–ª–∞–≤–∏—à –≤ –Ω–∞–±–æ—Ä–µ", "–¢–æ–ª—â–∏–Ω–∞ 1.5mm", "–¢–µ–∫—Å—Ç—É—Ä–Ω–∞—è –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å", "–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ –≤—Å–µ–º–∏ MX —Å–≤–∏—Ç—á–∞–º–∏"]
                },
                {
                    id: 102,
                    name: "–ö–µ–π–∫–∞–ø—ã XDA –ø—Ä–æ—Ñ–∏–ª—å –∞–Ω–∏–º–µ –¥–∏–∑–∞–π–Ω",
                    category: "keycaps",
                    brand: "Akko",
                    price: "399,000 UZS",
                    images: [
                        "https://images.unsplash.com/photo-1591799264318-7e6ef8ddb7ea?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                        "https://images.unsplash.com/photo-1587829741301-dc798b83add3?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
                    ],
                    description: "–£–Ω–∏–∫–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä –∫–µ–π–∫–∞–ø–æ–≤ —Å –∞–Ω–∏–º–µ –¥–∏–∑–∞–π–Ω–æ–º. XDA –ø—Ä–æ—Ñ–∏–ª—å, —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–∞—è –≤—ã—Å–æ—Ç–∞ –∫–ª–∞–≤–∏—à. –ò–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ª—é–±–∏—Ç–µ–ª–µ–π –º–∏–Ω–∏–º–∞–ª–∏–∑–º–∞ –∏ —ç—Ä–≥–æ–Ω–æ–º–∏–∫–∏. –ü—Ä–µ–º–∏–∞–ª—å–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –ø–µ—á–∞—Ç–∏, –∫–∞–∂–¥—ã–π —Å–∏–º–≤–æ–ª —á–µ—Ç–∫–æ –ø—Ä–æ—Ä–∏—Å–æ–≤–∞–Ω.",
                    material: "abs",
                    profile: "xda",
                    video: "dQw4w9WgXcQ",
                    features: ["ABS –ø–ª–∞—Å—Ç–∏–∫", "–°—É–±–ª–∏–º–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–µ—á–∞—Ç—å", "XDA –ø—Ä–æ—Ñ–∏–ª—å", "–ê–Ω–∏–º–µ –¥–∏–∑–∞–π–Ω", "127 –∫–ª–∞–≤–∏—à", "–†–∞–≤–Ω–æ–º–µ—Ä–Ω–∞—è –≤—ã—Å–æ—Ç–∞", "–ì–ª–∞–¥–∫–∞—è –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å", "–Ø—Ä–∫–∏–µ —Ü–≤–µ—Ç–∞"]
                },
                {
                    id: 103,
                    name: "–ù–∞–±–æ—Ä –∫–µ–π–∫–∞–ø–æ–≤ OEM –ø—Ä–æ—Ñ–∏–ª—å –≥—Ä–∞–¥–∏–µ–Ω—Ç",
                    category: "keycaps",
                    brand: "HyperX",
                    price: "259,000 UZS",
                    images: [
                        "https://images.unsplash.com/photo-1541140532154-b024d705b90a?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                        "https://images.unsplash.com/photo-1591799264318-7e6ef8ddb7ea?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
                    ],
                    description: "–ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–µ –∫–µ–π–∫–∞–ø—ã OEM –ø—Ä–æ—Ñ–∏–ª—è. –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –ø–µ—á–∞—Ç—å, —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ –∏—Å—Ç–∏—Ä–∞–Ω–∏—é. –ü–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ —Ü–≤–µ—Ç–æ–≤ —Å–æ–∑–¥–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —ç—Å—Ç–µ—Ç–∏—á–µ—Å–∫–∏–π —ç—Ñ—Ñ–µ–∫—Ç. –°–æ–≤–º–µ—Å—Ç–∏–º—ã —Å–æ –≤—Å–µ–º–∏ –ø–æ–ø—É–ª—è—Ä–Ω—ã–º–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞–º–∏.",
                    material: "pbt",
                    profile: "oem",
                    features: ["PBT –ø–ª–∞—Å—Ç–∏–∫", "–ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π –¥–∏–∑–∞–π–Ω", "OEM –ø—Ä–æ—Ñ–∏–ª—å", "–ê–Ω–≥–ª–∏–π—Å–∫–∞—è —Ä–∞—Å–∫–ª–∞–¥–∫–∞", "104 –∫–ª–∞–≤–∏—à–∏", "–í—ã—Å–æ–∫–∞—è –∏–∑–Ω–æ—Å–æ—Å—Ç–æ–π–∫–æ—Å—Ç—å", "–ù–æ–Ω–∏—Ä—É–µ–º–∞—è –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å", "–ö–æ–º–ø–ª–µ–∫—Ç –¥–æ–ø. –∫–ª–∞–≤–∏—à"]
                },
                {
                    id: 104,
                    name: "–ö–µ–π–∫–∞–ø—ã SA –ø—Ä–æ—Ñ–∏–ª—å —Ä–µ—Ç—Ä–æ —Å—Ç–∏–ª—å",
                    category: "keycaps",
                    brand: "Drop",
                    price: "599,000 UZS",
                    images: [
                        "https://images.unsplash.com/photo-1587829741301-dc798b83add3?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                        "https://images.unsplash.com/photo-1591799264318-7e6ef8ddb7ea?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
                    ],
                    description: "–†–µ—Ç—Ä–æ –Ω–∞–±–æ—Ä –∫–µ–π–∫–∞–ø–æ–≤ SA –ø—Ä–æ—Ñ–∏–ª—è. –í—ã—Å–æ–∫–∏–µ —Å—Ñ–µ—Ä–∏—á–µ—Å–∫–∏–µ –∫–ª–∞–≤–∏—à–∏, –≤–∏–Ω—Ç–∞–∂–Ω—ã–π –¥–∏–∑–∞–π–Ω. –°–æ–∑–¥–∞–Ω—ã –¥–ª—è –∏—Å—Ç–∏–Ω–Ω—ã—Ö —Ü–µ–Ω–∏—Ç–µ–ª–µ–π —Ä–µ—Ç—Ä–æ-—ç—Å—Ç–µ—Ç–∏–∫–∏. –ù–µ–≤–µ—Ä–æ—è—Ç–Ω–æ –ø—Ä–∏—è—Ç–Ω—ã–π —Ç–∞–∫—Ç–∏–ª—å–Ω—ã–π –æ—Ç–∫–ª–∏–∫ –∏ –∑–≤—É–∫.",
                    material: "abs",
                    profile: "sa",
                    video: "dQw4w9WgXcQ",
                    features: ["ABS –ø–ª–∞—Å—Ç–∏–∫", "Double-shot", "SA –ø—Ä–æ—Ñ–∏–ª—å", "–†–µ—Ç—Ä–æ –¥–∏–∑–∞–π–Ω", "–†–µ–¥–∫–∏–µ –∫–ª–∞–≤–∏—à–∏", "–í—ã—Å–æ–∫–∏–π –ø—Ä–æ—Ñ–∏–ª—å", "–°—Ñ–µ—Ä–∏—á–µ—Å–∫–∏–µ –∫–µ–π–∫–∞–ø—ã", "–í–∏–Ω—Ç–∞–∂–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã"]
                },
                {
                    id: 105,
                    name: "DIY –Ω–∞–±–æ—Ä –∫–µ–π–∫–∞–ø–æ–≤ —Å–º–µ—à–∞–Ω–Ω—ã–µ —Ü–≤–µ—Ç–∞",
                    category: "keycaps",
                    brand: "YMDK",
                    price: "199,000 UZS",
                    images: [
                        "https://images.unsplash.com/photo-1591799264318-7e6ef8ddb7ea?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                        "https://images.unsplash.com/photo-1541140532154-b024d705b90a?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
                    ],
                    description: "–ù–∞–±–æ—Ä –¥–ª—è —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ–π —Å–±–æ—Ä–∫–∏. –†–∞–∑–ª–∏—á–Ω—ã–µ —Ü–≤–µ—Ç–∞, –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω. –ò–¥–µ–∞–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö —ç–Ω—Ç—É–∑–∏–∞—Å—Ç–æ–≤ –º–æ–¥–¥–∏–Ω–≥–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä.",
                    material: "diy",
                    profile: "cherry",
                    features: ["PBT –ø–ª–∞—Å—Ç–∏–∫", "DIY –Ω–∞–±–æ—Ä", "Cherry –ø—Ä–æ—Ñ–∏–ª—å", "10 —Ä–∞–∑–Ω—ã—Ö —Ü–≤–µ—Ç–æ–≤", "–ë–æ–ª–µ–µ 200 –∫–ª–∞–≤–∏—à", "–ü—É—Å—Ç–∞—è –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è", "–†–∞–∑–ª–∏—á–Ω—ã–µ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã", "–¶–≤–µ—Ç–æ–≤–∞—è –ø–∞–ª–∏—Ç—Ä–∞"]
                }
            ];
        }

        // üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –≤ Firebase
        async function saveProduct(product) {
            try {
                product.category = 'keycaps';
                product.dateAdded = new Date().toISOString();
                
                const productRef = ref(database, 'products/' + product.id);
                await set(productRef, product);
                console.log('‚úÖ –¢–æ–≤–∞—Ä —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ Firebase:', product.name);
                return true;
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:', error);
                return false;
            }
        }

        // üîß –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è YouTube ID
        function getYouTubeId(url) {
            if (!url || url.trim() === '') return null;
            
            let videoId = url.trim();
            
            if (/^[a-zA-Z0-9_-]{11}$/.test(videoId)) {
                return videoId;
            }
            
            const patterns = [
                /(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/,
                /youtube\.com\/watch\?v=([^"&?\/\s]{11})/,
                /youtu\.be\/([^"&?\/\s]{11})/,
                /youtube\.com\/embed\/([^"&?\/\s]{11})/,
                /youtube\.com\/v\/([^"&?\/\s]{11})/
            ];
            
            for (let pattern of patterns) {
                const match = videoId.match(pattern);
                if (match && match[1]) {
                    return match[1];
                }
            }
            
            return null;
        }

        // üîß –§—É–Ω–∫—Ü–∏–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
        function applyFilters() {
            const material = document.getElementById('materialFilter').value;
            const profile = document.getElementById('profileFilter').value;
            const sortBy = document.getElementById('priceSort').value;
            const searchQuery = document.getElementById('searchInput').value.toLowerCase();

            filteredProducts = [...products];

            // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –º–∞—Ç–µ—Ä–∏–∞–ª—É
            if (material !== 'all') {
                filteredProducts = filteredProducts.filter(product => 
                    product.material === material
                );
            }

            // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø—Ä–æ—Ñ–∏–ª—é
            if (profile !== 'all') {
                filteredProducts = filteredProducts.filter(product => 
                    product.profile === profile
                );
            }

            // –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
            if (searchQuery) {
                filteredProducts = filteredProducts.filter(product => {
                    if (product.name.toLowerCase().includes(searchQuery)) return true;
                    if (product.brand && product.brand.toLowerCase().includes(searchQuery)) return true;
                    if (product.description && product.description.toLowerCase().includes(searchQuery)) return true;
                    return false;
                });
            }

            // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Ü–µ–Ω–µ
            if (sortBy === 'price_asc') {
                filteredProducts.sort((a, b) => parsePrice(a.price) - parsePrice(b.price));
            } else if (sortBy === 'price_desc') {
                filteredProducts.sort((a, b) => parsePrice(b.price) - parsePrice(a.price));
            }

            renderProducts();
            updateProductsCount();
        }

        // üí∞ –ü–∞—Ä—Å–∏–Ω–≥ —Ü–µ–Ω—ã
        function parsePrice(priceStr) {
            const cleanPrice = priceStr.replace(/[^\d,]/g, '').replace(',', '');
            return parseInt(cleanPrice) || 0;
        }

        // üî¢ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤
        function updateProductsCount() {
            const countElement = document.getElementById('productsCount');
            if (countElement) {
                countElement.textContent = `–ù–∞–π–¥–µ–Ω–æ —Ç–æ–≤–∞—Ä–æ–≤: ${filteredProducts.length}`;
            }
        }

        // üé® –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤
        function renderProducts() {
            const grid = document.getElementById('productsGrid');
            if (!grid) return;
            
            grid.innerHTML = '';
            
            if (filteredProducts.length === 0) {
                grid.innerHTML = `
                    <div style="text-align: center; padding: 3rem; color: var(--text-gray); grid-column: 1/-1;">
                        <i class="fas fa-keyboard" style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.5;"></i>
                        <h3 style="margin-bottom: 0.5rem;">–ö–µ–π–∫–∞–ø—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
                        <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏</p>
                    </div>
                `;
                return;
            }
            
            filteredProducts.forEach(product => {
                const shortDescription = product.description.length > 100 
                    ? product.description.substring(0, 100) + '...' 
                    : product.description;

                const mainImage = product.images && product.images.length > 0 
                    ? product.images[0] 
                    : 'https://via.placeholder.com/300x200?text=–ù–µ—Ç+–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è';

                const card = document.createElement('div');
                card.className = 'product-card fade-in-up';
                card.innerHTML = `
                    <div class="product-image-container">
                        <div class="zoom-indicator">
                            <i class="fas fa-search"></i>
                        </div>
                        <img src="${mainImage}" alt="${product.name}" class="product-image"
                             data-product-id="${product.id}"
                             onerror="this.onerror=null; this.src='https://via.placeholder.com/300x200?text=–û—à–∏–±–∫–∞+–∑–∞–≥—Ä—É–∑–∫–∏'">
                    </div>
                    <div class="product-info">
                        <div class="product-category">${getMaterialName(product.material)} ‚Ä¢ ${getProfileName(product.profile)}</div>
                        <h3 class="product-name">${product.name}</h3>
                        <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.8rem;">
                            ${product.brand ? `<span style="color: var(--accent-teal); font-size: 0.9rem; font-weight: 600;">${product.brand}</span>` : ''}
                        </div>
                        <p class="product-description-short">${shortDescription}</p>
                        <p class="product-price">${product.price}</p>
                    </div>
                `;
                
                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É (–æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª–∏ —Ç–æ–≤–∞—Ä–∞)
                card.addEventListener('click', (e) => {
                    if (!e.target.closest('.product-image-container')) {
                        openProductDetail(product);
                    }
                });
                
                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (–æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø—Ä–æ—Å–º–æ—Ç—Ä —Ñ–æ—Ç–æ)
                const imageContainer = card.querySelector('.product-image-container');
                imageContainer.addEventListener('click', (e) => {
                    e.stopPropagation();
                    openPhotoViewer(product);
                });
                
                grid.appendChild(card);
            });
        }

        // üè∑Ô∏è –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–∞
        function getMaterialName(materialKey) {
            const materials = {
                'abs': 'ABS –ø–ª–∞—Å—Ç–∏–∫',
                'pbt': 'PBT –ø–ª–∞—Å—Ç–∏–∫',
                'double-shot': 'Double-shot',
                'diy': 'DIY –Ω–∞–±–æ—Ä'
            };
            return materials[materialKey] || materialKey;
        }

        // üè∑Ô∏è –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è
        function getProfileName(profileKey) {
            const profiles = {
                'cherry': 'Cherry',
                'oem': 'OEM',
                'sa': 'SA',
                'dsa': 'DSA',
                'xda': 'XDA'
            };
            return profiles[profileKey] || profileKey;
        }

        // üñºÔ∏è –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫–∞ —Ñ–æ—Ç–æ
        function openPhotoViewer(product) {
            if (!product.images || product.images.length === 0) {
                alert('–£ —ç—Ç–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ –Ω–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π');
                return;
            }
            
            const modal = document.getElementById('photoViewerModal');
            const mainImage = document.getElementById('viewerMainImage');
            const thumbnailsContainer = document.getElementById('viewerThumbnails');
            const counter = document.getElementById('photoCounter');
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –æ —Ç–µ–∫—É—â–µ–º –ø—Ä–æ–¥—É–∫—Ç–µ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫–∞
            currentViewerProduct = product;
            currentViewerIndex = 0;
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–µ—Ä–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
            mainImage.src = product.images[0];
            mainImage.style.transform = 'scale(1)';
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–∫–∏ –¥–ª—è –≥–ª–∞–≤–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            mainImage.onerror = function() {
                this.src = 'https://via.placeholder.com/800x600?text=–û—à–∏–±–∫–∞+–∑–∞–≥—Ä—É–∑–∫–∏+–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è';
            };
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫
            counter.textContent = `1 / ${product.images.length}`;
            
            // –û—á–∏—â–∞–µ–º –∏ –¥–æ–±–∞–≤–ª—è–µ–º –º–∏–Ω–∏–∞—Ç—é—Ä—ã
            thumbnailsContainer.innerHTML = '';
            product.images.forEach((img, index) => {
                const thumbnail = document.createElement('img');
                thumbnail.src = img;
                thumbnail.alt = `–§–æ—Ç–æ ${index + 1} —Ç–æ–≤–∞—Ä–∞ ${product.name}`;
                thumbnail.className = `viewer-thumbnail ${index === 0 ? 'active' : ''}`;
                thumbnail.addEventListener('click', () => {
                    changeViewerImage(index);
                });
                
                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –º–∏–Ω–∏–∞—Ç—é—Ä—ã
                thumbnail.onerror = function() {
                    this.src = 'https://via.placeholder.com/80x80?text=–û—à–∏–±–∫–∞';
                };
                
                thumbnailsContainer.appendChild(thumbnail);
            });
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        // üîÑ –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–º–µ–Ω—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –ø—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫–µ
        function changeViewerImage(index) {
            if (!currentViewerProduct || !currentViewerProduct.images) return;
            
            const product = currentViewerProduct;
            const images = product.images;
            
            if (index < 0) index = images.length - 1;
            if (index >= images.length) index = 0;
            
            currentViewerIndex = index;
            
            const mainImage = document.getElementById('viewerMainImage');
            const counter = document.getElementById('photoCounter');
            const thumbnails = document.querySelectorAll('.viewer-thumbnail');
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –≥–ª–∞–≤–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
            mainImage.src = images[index];
            mainImage.style.transform = 'scale(1)';
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫
            counter.textContent = `${index + 1} / ${images.length}`;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –º–∏–Ω–∏–∞—Ç—é—Ä—É
            thumbnails.forEach((thumb, i) => {
                thumb.classList.toggle('active', i === index);
            });
            
            // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –∫ –∞–∫—Ç–∏–≤–Ω–æ–π –º–∏–Ω–∏–∞—Ç—é—Ä–µ
            const activeThumb = thumbnails[index];
            if (activeThumb) {
                activeThumb.scrollIntoView({
                    behavior: 'smooth',
                    block: 'nearest',
                    inline: 'center'
                });
            }
        }

        // üìè –§—É–Ω–∫—Ü–∏–∏ –∑—É–º–∞
        function zoomViewerImage(direction) {
            const mainImage = document.getElementById('viewerMainImage');
            let currentScale = parseFloat(mainImage.style.transform.replace('scale(', '').replace(')', '')) || 1;
            
            if (direction === 'in') {
                currentScale = Math.min(currentScale + 0.2, 3);
            } else if (direction === 'out') {
                currentScale = Math.max(currentScale - 0.2, 1);
            }
            
            mainImage.style.transform = `scale(${currentScale})`;
            mainImage.style.transition = 'transform 0.3s ease';
        }

        // üì• –§—É–Ω–∫—Ü–∏—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è —Ñ–æ—Ç–æ
        function downloadCurrentPhoto() {
            if (!currentViewerProduct) return;
            
            const product = currentViewerProduct;
            const currentIndex = currentViewerIndex;
            
            if (!product.images || !product.images[currentIndex]) return;
            
            const imageUrl = product.images[currentIndex];
            const fileName = `keycap_${product.id}_${currentIndex + 1}.jpg`;
            
            // –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—É—é —Å—Å—ã–ª–∫—É –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
            const link = document.createElement('a');
            link.href = imageUrl;
            link.download = fileName;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            showNotification('‚úÖ –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –Ω–∞—á–∞–ª–æ—Å—å');
        }

        // üîî –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: var(--primary-blue);
                color: white;
                padding: 1rem 1.5rem;
                border-radius: 10px;
                z-index: 4000;
                animation: slideInRight 0.3s ease;
                font-weight: 600;
                display: flex;
                align-items: center;
                gap: 0.5rem;
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            `;
            notification.innerHTML = `<i class="fas fa-check"></i> ${message}`;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 2000);
        }

        // üîç –û—Ç–∫—Ä—ã—Ç–∏–µ –¥–µ—Ç–∞–ª–µ–π —Ç–æ–≤–∞—Ä–∞ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏
        function openProductDetail(product) {
            currentImageIndex = 0;
            currentProductIdForComments = product.id;
            
            const modal = document.getElementById('productDetailModal');
            const content = document.getElementById('productDetailContent');
            
            // –§–æ—Ä–º–∏—Ä—É–µ–º HTML –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            let html = `
                <div class="product-detail-grid">
                    <div class="product-gallery">
                        <div class="main-image" onclick="openPhotoViewerFromDetail(${product.id})">
                            <img src="${product.images && product.images.length > 0 ? product.images[0] : 'https://via.placeholder.com/500x400?text=–ù–µ—Ç+–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è'}" 
                                 alt="${product.name}"
                                 id="mainProductImage"
                                 onerror="this.onerror=null; this.src='https://via.placeholder.com/500x400?text=–û—à–∏–±–∫–∞+–∑–∞–≥—Ä—É–∑–∫–∏'">
                            ${product.images && product.images.length > 1 ? `
                            <div class="gallery-nav">
                                <button class="nav-btn" onclick="prevImageDetail()">
                                    <i class="fas fa-chevron-left"></i>
                                </button>
                                <button class="nav-btn" onclick="nextImageDetail()">
                                    <i class="fas fa-chevron-right"></i>
                                </button>
                            </div>
                            ` : ''}
                        </div>
                        
                        ${product.images && product.images.length > 1 ? `
                        <div class="image-thumbnails">
                            ${product.images.map((img, index) => `
                                <img src="${img}" 
                                     alt="–§–æ—Ç–æ ${index + 1}"
                                     class="thumbnail ${index === 0 ? 'active' : ''}"
                                     onclick="changeImageDetail(${index})"
                                     onerror="this.onerror=null; this.src='https://via.placeholder.com/80x80?text=–û—à–∏–±–∫–∞'">
                            `).join('')}
                        </div>
                        
                        <div class="photo-count">
                            <i class="fas fa-camera"></i>
                            <span>${product.images.length} —Ñ–æ—Ç–æ</span>
                        </div>
                        ` : ''}
                    </div>
                    
                    <div class="product-details">
                        <h1 style="font-size: 2.2rem; margin-bottom: 1rem; color: var(--text-light);">${product.name}</h1>
                        
                        <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1.5rem; flex-wrap: wrap;">
                            <div class="product-category" style="margin: 0;">${getMaterialName(product.material)} ‚Ä¢ ${getProfileName(product.profile)}</div>
                            ${product.brand ? `<span style="color: var(--accent-teal); font-weight: 600; background: rgba(13, 148, 136, 0.1); padding: 0.3rem 1rem; border-radius: 15px;">${product.brand}</span>` : ''}
                        </div>
                        
                        <p class="product-price" style="font-size: 2.5rem; margin-bottom: 2rem;">${product.price}</p>
                        
                        <div class="product-description-full">
                            <h3 style="margin-bottom: 1rem; color: var(--text-light);">–û–ø–∏—Å–∞–Ω–∏–µ</h3>
                            <p>${product.description}</p>
                        </div>
                        
                        ${product.features && product.features.length > 0 ? `
                        <div class="product-features">
                            <h3 style="margin-bottom: 1rem; color: var(--text-light);">–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</h3>
                            <ul class="feature-list">
                                ${product.features.map(feature => `<li>${feature}</li>`).join('')}
                            </ul>
                        </div>
                        ` : ''}
                    </div>
                </div>
            `;
            
            // –î–æ–±–∞–≤–ª—è–µ–º –≤–∏–¥–µ–æ YouTube, –µ—Å–ª–∏ –µ—Å—Ç—å
            if (product.video && product.video.trim() !== '') {
                const videoId = getYouTubeId(product.video);
                if (videoId) {
                    html += `
                        <div class="video-container">
                            <h3><i class="fab fa-youtube" style="color: #ff0000;"></i> –í–∏–¥–µ–æ-–æ–±–∑–æ—Ä</h3>
                            <iframe src="https://www.youtube.com/embed/${videoId}" 
                                    title="YouTube video player" 
                                    frameborder="0" 
                                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                                    allowfullscreen>
                            </iframe>
                        </div>
                    `;
                }
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Å–µ–∫—Ü–∏—é –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
            html += `
                <div class="comments-section" id="productCommentsSection">
                    <h3 class="comments-title">
                        <i class="fas fa-comments"></i> –û—Ç–∑—ã–≤—ã –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π
                    </h3>
                    
                    <div class="comment-form">
                        <h4>–û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤</h4>
                        <form id="addCommentForm">
                            <input type="hidden" id="commentProductId" value="${product.id}">
                            <div class="comment-input-group">
                                <label for="commentAuthor">–í–∞—à–µ –∏–º—è *</label>
                                <input type="text" id="commentAuthor" class="comment-input" required placeholder="–ö–∞–∫ –≤–∞—Å –∑–æ–≤—É—Ç?">
                            </div>
                            <div class="comment-input-group">
                                <label for="commentText">–í–∞—à –æ—Ç–∑—ã–≤ *</label>
                                <textarea id="commentText" class="comment-textarea" required placeholder="–ü–æ–¥–µ–ª–∏—Ç–µ—Å—å –≤–∞—à–∏–º –º–Ω–µ–Ω–∏–µ–º –æ —Ç–æ–≤–∞—Ä–µ..."></textarea>
                            </div>
                            <button type="submit" class="comment-submit-btn">
                                <i class="fas fa-paper-plane"></i> –û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤
                            </button>
                        </form>
                        <p style="color: var(--text-gray); font-size: 0.9rem; margin-top: 1rem;">
                            <i class="fas fa-info-circle"></i> –í–∞—à –æ—Ç–∑—ã–≤ –±—É–¥–µ—Ç –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º.
                        </p>
                    </div>
                    
                    <div class="comments-list" id="commentsList">
                        <!-- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∑–¥–µ—Å—å -->
                    </div>
                </div>
            `;
            
            content.innerHTML = html;
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –æ —Ç–µ–∫—É—â–µ–º –ø—Ä–æ–¥—É–∫—Ç–µ –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            window.currentDetailProduct = product;
            window.currentDetailIndex = 0;
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è —ç—Ç–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
            renderProductComments(product.id);
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ñ–æ—Ä–º—ã –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
            const commentForm = document.getElementById('addCommentForm');
            if (commentForm) {
                commentForm.addEventListener('submit', async function(e) {
                    e.preventDefault();
                    
                    const author = document.getElementById('commentAuthor').value.trim();
                    const text = document.getElementById('commentText').value.trim();
                    const productId = document.getElementById('commentProductId').value;
                    
                    if (!author || !text) {
                        alert('‚ùå –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!');
                        return;
                    }
                    
                    // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
                    const newComment = {
                        id: Date.now().toString(),
                        productId: parseInt(productId),
                        author: author,
                        text: text,
                        status: 'pending',
                        date: new Date().toISOString()
                    };
                    
                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ Firebase
                    try {
                        const commentsRef = ref(database, 'comments/' + newComment.id);
                        await set(commentsRef, newComment);
                        
                        // –û—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—É
                        document.getElementById('commentAuthor').value = '';
                        document.getElementById('commentText').value = '';
                        
                        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
                        showNotification('‚úÖ –í–∞—à –æ—Ç–∑—ã–≤ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É!');
                        
                        // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
                        renderProductComments(productId);
                        
                    } catch (error) {
                        console.error('‚ùå –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è:', error);
                        alert('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç–∑—ã–≤–∞');
                    }
                });
            }
        }

        // üí¨ –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –¥–ª—è —Ç–æ–≤–∞—Ä–∞
        function renderProductComments(productId) {
            const commentsList = document.getElementById('commentsList');
            if (!commentsList) return;
            
            // –§–∏–ª—å—Ç—Ä—É–µ–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è —ç—Ç–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
            const productComments = Object.values(comments).filter(comment => 
                comment.productId == productId && comment.status === 'approved'
            );
            
            if (productComments.length === 0) {
                commentsList.innerHTML = `
                    <div class="no-comments">
                        <i class="fas fa-comment-slash" style="font-size: 2rem; margin-bottom: 1rem; opacity: 0.5;"></i>
                        <p>–ü–æ–∫–∞ –Ω–µ—Ç –æ—Ç–∑—ã–≤–æ–≤. –ë—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º!</p>
                    </div>
                `;
                return;
            }
            
            // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –¥–∞—Ç–µ (–Ω–æ–≤—ã–µ —Å–Ω–∞—á–∞–ª–∞)
            productComments.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            let html = '';
            productComments.forEach(comment => {
                const date = new Date(comment.date).toLocaleDateString('ru-RU', {
                    day: 'numeric',
                    month: 'long',
                    year: 'numeric'
                });
                
                html += `
                    <div class="comment-item">
                        <div class="comment-header">
                            <div class="comment-author">${comment.author}</div>
                            <div class="comment-date">${date}</div>
                        </div>
                        <div class="comment-text">${comment.text}</div>
                    </div>
                `;
            });
            
            commentsList.innerHTML = html;
        }

        // üîÑ –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ª–µ–¥—É—é—â–µ–≥–æ ID —Ç–æ–≤–∞—Ä–∞
        async function getNextProductId() {
            try {
                const productsRef = ref(database, 'products');
                const snapshot = await get(productsRef);
                
                if (snapshot.exists()) {
                    const data = snapshot.val();
                    const ids = Object.values(data).map(product => product.id);
                    return ids.length > 0 ? Math.max(...ids) + 1 : 1000;
                } else {
                    return 1000;
                }
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ª–µ–¥—É—é—â–µ–≥–æ ID:', error);
                return Date.now();
            }
        }

        // ‚ú® –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–µ–π–∫–∞–ø—ã
            loadKeycaps();
            
            // üéØ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
            document.getElementById('closeAdminModal').addEventListener('click', () => {
                document.getElementById('adminLoginModal').style.display = 'none';
            });
            
            document.getElementById('closeAddModal').addEventListener('click', () => {
                document.getElementById('addProductModal').style.display = 'none';
            });
            
            document.getElementById('closeProductModal').addEventListener('click', () => {
                document.getElementById('productDetailModal').style.display = 'none';
                currentProductIdForComments = null;
                document.body.style.overflow = 'auto';
            });
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –∏—Ö
            window.addEventListener('click', (e) => {
                const adminModal = document.getElementById('adminLoginModal');
                const addModal = document.getElementById('addProductModal');
                const productModal = document.getElementById('productDetailModal');
                
                if (e.target === adminModal) adminModal.style.display = 'none';
                if (e.target === addModal) addModal.style.display = 'none';
                if (e.target === productModal) {
                    productModal.style.display = 'none';
                    currentProductIdForComments = null;
                    document.body.style.overflow = 'auto';
                }
            });
            
            // üîê –û—Ç–∫—Ä—ã—Ç–∏–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
            document.getElementById('adminBtn').addEventListener('click', () => {
                document.getElementById('adminLoginModal').style.display = 'block';
            });
            
            // üìù –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ –≤ –∞–¥–º–∏–Ω–∫—É
            document.getElementById('adminLoginForm').addEventListener('submit', async (e) => {
                e.preventDefault();
                
                const login = document.getElementById('adminLogin').value;
                const password = document.getElementById('adminPassword').value;
                
                // –ü—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–∏–Ω–∞/–ø–∞—Ä–æ–ª—è
                if (login === 'admin' && password === 'admin') {
                    isAdminLoggedIn = true;
                    document.getElementById('adminLoginModal').style.display = 'none';
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞
                    document.getElementById('adminControls').style.display = 'flex';
                    document.getElementById('adminBtn').style.display = 'none';
                    
                    showNotification('‚úÖ –í—ã —É—Å–ø–µ—à–Ω–æ –≤–æ—à–ª–∏ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å!');
                } else {
                    alert('‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å!');
                }
            });
            
            // üö™ –í—ã—Ö–æ–¥ –∏–∑ –∞–¥–º–∏–Ω–∫–∏
            document.getElementById('adminLogoutBtn').addEventListener('click', () => {
                isAdminLoggedIn = false;
                document.getElementById('adminControls').style.display = 'none';
                document.getElementById('adminBtn').style.display = 'block';
                showNotification('üëã –í—ã –≤—ã—à–ª–∏ –∏–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏');
            });
            
            // ‚ûï –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞
            document.getElementById('addCategoryProductBtn').addEventListener('click', () => {
                document.getElementById('addProductModal').style.display = 'block';
            });
            
            // üìù –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞
            document.getElementById('addCategoryProductForm').addEventListener('submit', async (e) => {
                e.preventDefault();
                
                const name = document.getElementById('catProductName').value.trim();
                const brand = document.getElementById('catProductBrand').value.trim() || '';
                const price = document.getElementById('catProductPrice').value.trim();
                const material = document.getElementById('catProductMaterial').value;
                const profile = document.getElementById('catProductProfile').value;
                const description = document.getElementById('catProductDescription').value.trim();
                const imagesText = document.getElementById('catProductImages').value.trim();
                const featuresText = document.getElementById('catProductFeatures').value.trim();
                const video = document.getElementById('catProductVideo').value.trim();
                
                // –í–∞–ª–∏–¥–∞—Ü–∏—è
                if (!name || !price || !description || !imagesText) {
                    alert('‚ùå –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è!');
                    return;
                }
                
                // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
                const images = imagesText.split('\n')
                    .map(url => url.trim())
                    .filter(url => url !== '');
                
                if (images.length === 0) {
                    alert('‚ùå –î–æ–±–∞–≤—å—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ!');
                    return;
                }
                
                // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
                const features = featuresText.split(',')
                    .map(feature => feature.trim())
                    .filter(feature => feature !== '');
                
                // –ü–æ–ª—É—á–∞–µ–º —Å–ª–µ–¥—É—é—â–∏–π ID
                const nextId = await getNextProductId();
                
                // –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç —Ç–æ–≤–∞—Ä–∞
                const newProduct = {
                    id: nextId,
                    name,
                    brand: brand || undefined,
                    price,
                    material,
                    profile,
                    description,
                    images,
                    features: features.length > 0 ? features : undefined,
                    video: video || undefined,
                    category: 'keycaps',
                    dateAdded: new Date().toISOString()
                };
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–æ–≤–∞—Ä
                const saveSuccess = await saveProduct(newProduct);
                
                if (saveSuccess) {
                    // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                    products.push(newProduct);
                    filteredProducts = [...products];
                    renderProducts();
                    updateProductsCount();
                    
                    // –û—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—É
                    document.getElementById('addCategoryProductForm').reset();
                    document.getElementById('addProductModal').style.display = 'none';
                    
                    showNotification('‚úÖ –¢–æ–≤–∞—Ä —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω!');
                } else {
                    alert('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞');
                }
            });
            
            // üîç –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤
            const materialFilter = document.getElementById('materialFilter');
            const profileFilter = document.getElementById('profileFilter');
            const priceSort = document.getElementById('priceSort');
            const searchInput = document.getElementById('searchInput');
            
            if (materialFilter) materialFilter.addEventListener('change', applyFilters);
            if (profileFilter) profileFilter.addEventListener('change', applyFilters);
            if (priceSort) priceSort.addEventListener('change', applyFilters);
            if (searchInput) searchInput.addEventListener('input', applyFilters);
            
            // üñºÔ∏è –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫–∞ —Ñ–æ—Ç–æ
            const photoViewerModal = document.getElementById('photoViewerModal');
            const closeViewerBtn = document.getElementById('closeViewer');
            const prevPhotoBtn = document.getElementById('prevPhotoBtn');
            const nextPhotoBtn = document.getElementById('nextPhotoBtn');
            const zoomInBtn = document.getElementById('zoomInBtn');
            const zoomOutBtn = document.getElementById('zoomOutBtn');
            const downloadBtn = document.getElementById('downloadBtn');
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫–∞
            if (closeViewerBtn) {
                closeViewerBtn.addEventListener('click', () => {
                    photoViewerModal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                });
            }
            
            // –ö–ª–∏–∫ –≤–Ω–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è
            if (photoViewerModal) {
                photoViewerModal.addEventListener('click', (e) => {
                    if (e.target === photoViewerModal) {
                        photoViewerModal.style.display = 'none';
                        document.body.style.overflow = 'auto';
                    }
                });
            }
            
            // –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Ñ–æ—Ç–æ
            if (prevPhotoBtn) {
                prevPhotoBtn.addEventListener('click', () => {
                    changeViewerImage(currentViewerIndex - 1);
                });
            }
            
            if (nextPhotoBtn) {
                nextPhotoBtn.addEventListener('click', () => {
                    changeViewerImage(currentViewerIndex + 1);
                });
            }
            
            // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑—É–º–æ–º
            if (zoomInBtn) {
                zoomInBtn.addEventListener('click', () => zoomViewerImage('in'));
            }
            
            if (zoomOutBtn) {
                zoomOutBtn.addEventListener('click', () => zoomViewerImage('out'));
            }
            
            // –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–æ—Ç–æ
            if (downloadBtn) {
                downloadBtn.addEventListener('click', downloadCurrentPhoto);
            }
            
            // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
            document.addEventListener('keydown', (e) => {
                if (photoViewerModal.style.display === 'block') {
                    switch(e.key) {
                        case 'ArrowLeft':
                            changeViewerImage(currentViewerIndex - 1);
                            break;
                        case 'ArrowRight':
                            changeViewerImage(currentViewerIndex + 1);
                            break;
                        case 'Escape':
                            photoViewerModal.style.display = 'none';
                            document.body.style.overflow = 'auto';
                            break;
                        case '+':
                        case '=':
                            zoomViewerImage('in');
                            break;
                        case '-':
                            zoomViewerImage('out');
                            break;
                    }
                }
            });
            
            // Zoom –∫–æ–ª–µ—Å–∏–∫–æ–º –º—ã—à–∏
            const viewerMainImage = document.getElementById('viewerMainImage');
            if (viewerMainImage) {
                viewerMainImage.addEventListener('wheel', (e) => {
                    e.preventDefault();
                    if (e.deltaY < 0) {
                        zoomViewerImage('in');
                    } else {
                        zoomViewerImage('out');
                    }
                });
            }
            
            console.log('üöÄ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–µ–π–∫–∞–ø–æ–≤ –∑–∞–≥—Ä—É–∂–µ–Ω–∞!');
        });
        
        // –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
        window.openPhotoViewer = openPhotoViewer;
        window.changeViewerImage = changeViewerImage;
        
        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≥–∞–ª–µ—Ä–µ–µ–π –≤ –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
        window.openPhotoViewerFromDetail = function(productId) {
            const product = products.find(p => p.id === productId);
            if (product) {
                openPhotoViewer(product);
            }
        };
        
        window.changeImageDetail = function(index) {
            if (!window.currentDetailProduct || !window.currentDetailProduct.images) return;
            
            window.currentDetailIndex = index;
            const mainImage = document.getElementById('mainProductImage');
            const thumbnails = document.querySelectorAll('.thumbnail');
            
            if (mainImage && window.currentDetailProduct.images[index]) {
                mainImage.src = window.currentDetailProduct.images[index];
                
                thumbnails.forEach((thumb, i) => {
                    thumb.classList.toggle('active', i === index);
                });
            }
        };
        
        window.prevImageDetail = function() {
            if (!window.currentDetailProduct || !window.currentDetailProduct.images) return;
            
            const images = window.currentDetailProduct.images;
            const newIndex = (window.currentDetailIndex - 1 + images.length) % images.length;
            window.changeImageDetail(newIndex);
        };
        
        window.nextImageDetail = function() {
            if (!window.currentDetailProduct || !window.currentDetailProduct.images) return;
            
            const images = window.currentDetailProduct.images;
            const newIndex = (window.currentDetailIndex + 1) % images.length;
            window.changeImageDetail(newIndex);
        };
    </script>
</body>
</html>
